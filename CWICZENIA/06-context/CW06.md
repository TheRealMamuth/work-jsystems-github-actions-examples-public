# Ä†wiczenie praktyczne 06 â€“ Praca z rÃ³Å¼nymi kontekstami (PL) / Practical Exercise 06 â€“ Working with Different Contexts (EN)

---

## ğŸ‡µğŸ‡± WERSJA POLSKA

### Opis Ä‡wiczenia
W tym Ä‡wiczeniu naszym celem jest praca z rÃ³Å¼nymi kontekstami dostÄ™pnymi podczas uruchamiania workflow.  
PoniÅ¼ej znajdziesz instrukcje do Ä‡wiczenia.

---

### 1. Utworzenie pierwszej wersji workflow

a. UtwÃ³rz plik o nazwie `06-contexts.yaml` w folderze `.github/workflows` w katalogu gÅ‚Ã³wnym repozytorium.  
b. Nadaj workflow nazwÄ™ **â€06 â€“ Contextsâ€**.  
c. Dodaj do workflow nastÄ™pujÄ…ce wyzwalacze (triggers):  
   i. `push`  
   ii. `workflow_dispatch`

d. Dodaj do workflow jedno zadanie (job). Zadanie o nazwie `echo-data` ma dziaÅ‚aÄ‡ na `ubuntu-latest` i zawieraÄ‡ dwa kroki:

   i. Pierwszy krok, nazwany **Display Information**, powinien wypisaÄ‡ poniÅ¼sze linie z informacjami z kontekstu `github` (wskazÃ³wka: uÅ¼yj wielowierszowego skryptu z kilkoma poleceniami `echo`):
   - i. "Event name: <pobierz tutaj nazwÄ™ zdarzenia>"  
   - ii. "Ref: <pobierz tutaj ref>"  
   - iii. "SHA: <pobierz tutaj commit sha>"  
   - iv. "Actor: <pobierz tutaj nazwÄ™ aktora>"  
   - v. "Workflow: <pobierz tutaj nazwÄ™ workflow>"  
   - vi. "Run ID: <pobierz tutaj ID uruchomienia>"  
   - vii. "Run number: <pobierz tutaj numer uruchomienia>"

   ii. Drugi krok, nazwany **Retrieve Variable**, powinien wypisaÄ‡ jednÄ… liniÄ™ zawierajÄ…cÄ… wartoÅ›Ä‡ zmiennej repozytorium o nazwie `MY_VAR`.

e. UtwÃ³rz zmiennÄ… repozytorium o nazwie `MY_VAR`. Ustaw wartoÅ›Ä‡ tej zmiennej na `hello world`.  
f. Zacommituj zmiany i wypchnij (push) kod. PoÅ›wiÄ™Ä‡ chwilÄ™, aby obejrzeÄ‡ wynik dziaÅ‚ania workflow.

---

### 2. Rozszerzenie workflow o nieprawidÅ‚owe konteksty

a. Dodaj teraz do workflow nowy klucz konfiguracyjny `run-name`. Definiuje siÄ™ go na poziomie gÅ‚Ã³wnym (top-level), obok kluczy `name` i `on`. `run-name` pozwala zdefiniowaÄ‡ nazwÄ™ uruchomienia workflow wyÅ›wietlanÄ… w interfejsie.  
b. Ustaw wartoÅ›Ä‡ `run-name` na **`My custom workflow run name â€“ ${{ runner.os }}`**.  
c. Zacommituj zmiany i wypchnij kod. Przyjrzyj siÄ™ wynikowi dziaÅ‚ania workflow. Jaki komunikat bÅ‚Ä™du siÄ™ pojawiÅ‚?

---

### 3. Naprawienie nieprawidÅ‚owych kontekstÃ³w i rozszerzenie workflow o wejÅ›cia (inputs)

a. ZastÄ…p `run-name` wartoÅ›ciÄ… **`06 â€“ Contexts | DEBUG â€“ ${{ inputs.debug }}`**.  
b. Dodaj wejÅ›cie do wyzwalacza `workflow_dispatch`. WejÅ›cie powinno mieÄ‡ nazwÄ™ `debug`, typ `boolean` i domyÅ›lnÄ… wartoÅ›Ä‡ `false`.  
c. Zacommituj zmiany i wypchnij kod. SprawdÅº wynik uruchomienia workflow wyzwolonego zdarzeniem `push`. Jaka wartoÅ›Ä‡ zostaÅ‚a podstawiona dla wejÅ›cia `debug`?  
d. Teraz uruchom workflow z interfejsu i wyprÃ³buj rÃ³Å¼ne warianty wartoÅ›ci wejÅ›cia `debug`. Jak wpÅ‚ywa to na rezultat uruchomieÅ„ workflow?

---

### 4. Rozszerzenie workflow o kontekst `env`

a. Dodaj na poziomie gÅ‚Ã³wnym klucz `env`, aby zdefiniowaÄ‡ dwie zmienne Å›rodowiskowe:  
   i. `MY_WORKFLOW_VAR` z wartoÅ›ciÄ… `'workflow'`  
   ii. `MY_OVERWRITTEN_VAR` z wartoÅ›ciÄ… `'workflow'`

b. Pod zadaniem `echo-data` dodaj klucz `env`, aby zdefiniowaÄ‡ dwie zmienne Å›rodowiskowe:  
   i. `MY_JOB_VAR` z wartoÅ›ciÄ… `'job'`  
   ii. `MY_OVERWRITTEN_VAR` z wartoÅ›ciÄ… `'job'`

c. Dodaj dodatkowy krok po kroku **Retrieve Variable** i nazwij go **Print Env Variables**.  
d. Pod krokiem **Print Env Variables** dodaj `env` z jednÄ… zmiennÄ… Å›rodowiskowÄ…:  
   i. `MY_OVERWRITTEN_VAR` z wartoÅ›ciÄ… `'step'`

e. Uruchom wielowierszowy skrypt, ktÃ³ry wypisze na ekran:  
   i. "Workflow env: <pobierz tutaj wartoÅ›Ä‡ zmiennej Å›rodowiskowej MY_WORKFLOW_VAR>"  
   ii. "Overwritten env: <pobierz tutaj wartoÅ›Ä‡ zmiennej Å›rodowiskowej MY_OVERWRITTEN_VAR>"

f. Dodaj jeszcze jeden krok po pierwszym **Print Env Variables**. MoÅ¼esz nazwaÄ‡ go podobnie jak poprzedni. Nie definiuj Å¼adnych dodatkowych zmiennych `env`.  
g. Uruchom wielowierszowy skrypt, ktÃ³ry wypisze na ekran:  
   i. "Workflow env: <pobierz tutaj wartoÅ›Ä‡ zmiennej Å›rodowiskowej MY_WORKFLOW_VAR>"  
   ii. "Overwritten env: <pobierz tutaj wartoÅ›Ä‡ zmiennej Å›rodowiskowej MY_OVERWRITTEN_VAR>"

h. Zacommituj zmiany i wypchnij kod. Obejrzyj wynik dziaÅ‚ania workflow. W jaki sposÃ³b zmienne `env` zostaÅ‚y nadpisane w hierarchii: workflow â†’ job â†’ step?

---

### 5. PorzÄ…dki w wyzwalaczach

Po sprawdzeniu rÃ³Å¼nych sposobÃ³w wyzwalania workflow zredukuj listÄ™ wyzwalaczy tak, aby zostaÅ‚ tylko `workflow_dispatch`. Zapobiegnie to uruchamianiu workflow przy kaÅ¼dym `push` i zaÅ›miecaniu listy uruchomieÅ„.

---

## ğŸ‡¬ğŸ‡§ ENGLISH VERSION

### Exercise Description
In this practical exercise, our goal is to work with different contexts available during workflow runs.  
Here are the instructions for the exercise.

---

### 1. Creating the first version of the workflow

a. Create a file named `06-contexts.yaml` under the `.github/workflows` folder in the root of your repository.  
b. Name the workflow **"06 â€“ Contexts"**.  
c. Add the following triggers to your workflow:  
   i. `push`  
   ii. `workflow_dispatch`

d. Add a single job to the workflow. The job, named `echo-data`, should run on `ubuntu-latest` and contain two steps:

   i. The first step, named **Display Information**, should print the following lines containing information from the `github` context (tip: use a multi-line script with several `echo` commands):
   - i. "Event name: <retrieve the event name here>"  
   - ii. "Ref: <retrieve the ref here>"  
   - iii. "SHA: <retrieve the commit sha here>"  
   - iv. "Actor: <retrieve the actor name here>"  
   - v. "Workflow: <retrieve the workflow name here>"  
   - vi. "Run ID: <retrieve the run ID here>"  
   - vii. "Run number: <retrieve the run number here>"

   ii. The second step, named **Retrieve Variable**, should print a single line containing the value of a repository variable named `MY_VAR`.

e. Create a repository variable named `MY_VAR` and set its value to `hello world`.  
f. Commit the changes and push the code. Take some time to inspect the output of the workflow run.

---

### 2. Extending the workflow with invalid contexts

a. Add a new configuration key named `run-name` to the workflow. This is defined at the top level, as a sibling to the `name` and `on` keys. The run name defines how the workflow run appears in the UI.  
b. Set the value of `run-name` to **`My custom workflow run name â€“ ${{ runner.os }}`**.  
c. Commit the changes and push the code. Inspect the output of the workflow run. Which error message appeared?

---

### 3. Fixing invalid contexts and extending the workflow with inputs

a. Replace the `run-name` with **`06 â€“ Contexts | DEBUG â€“ ${{ inputs.debug }}`**.  
b. Add an input to the `workflow_dispatch` trigger. The input should be named `debug`, have a `boolean` type, and a default value of `false`.  
c. Commit the changes and push the code. Inspect the output of the workflow run triggered by the `push` event. What value was populated for the `debug` input?  
d. Now trigger the workflow from the UI and try different values for the `debug` input. How does this impact the result of the workflow runs?

---

### 4. Extending the workflow with the `env` context

a. Add a top-level `env` key to define two environment variables:  
   i. `MY_WORKFLOW_VAR` set to `'workflow'`  
   ii. `MY_OVERWRITTEN_VAR` set to `'workflow'`

b. Under the `echo-data` job, add an `env` key to define two environment variables:  
   i. `MY_JOB_VAR` set to `'job'`  
   ii. `MY_OVERWRITTEN_VAR` set to `'job'`

c. Add an additional step after **Retrieve Variable**, and name it **Print Env Variables**.  
d. Under **Print Env Variables**, add an `env` key to define a single environment variable:  
   i. `MY_OVERWRITTEN_VAR` set to `'step'`

e. Execute a multi-line script to print the following information on the screen:  
   i. "Workflow env: <retrieve the value of the MY_WORKFLOW_VAR env variable here>"  
   ii. "Overwritten env: <retrieve the value of the MY_OVERWRITTEN_VAR env variable here>"

f. Add yet another step after the first **Print Env Variables**. You can name the step similarly to the previous one. Do not define any additional env variables.  
g. Execute a multi-line script to print the following information on the screen:  
   i. "Workflow env: <retrieve the value of the MY_WORKFLOW_VAR env variable here>"  
   ii. "Overwritten env: <retrieve the value of the MY_OVERWRITTEN_VAR env variable here>"

h. Commit the changes and push the code. Take some time to inspect the output of the workflow run. How were the `env` variables overwritten across the workflow, job, and step hierarchy?

---

### 5. Cleanup of triggers

After exploring the different ways to trigger a workflow, reduce the list of triggers to **only** `workflow_dispatch` to prevent the workflow from running on every push and cluttering the list of workflow runs.
