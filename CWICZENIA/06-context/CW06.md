# Ćwiczenie praktyczne 06 – Praca z różnymi kontekstami (PL) / Practical Exercise 06 – Working with Different Contexts (EN)

---

## 🇵🇱 WERSJA POLSKA

### Opis ćwiczenia
W tym ćwiczeniu naszym celem jest praca z różnymi kontekstami dostępnymi podczas uruchamiania workflow.  
Poniżej znajdziesz instrukcje do ćwiczenia.

---

### 1. Utworzenie pierwszej wersji workflow

a. Utwórz plik o nazwie `06-contexts.yaml` w folderze `.github/workflows` w katalogu głównym repozytorium.  
b. Nadaj workflow nazwę **„06 – Contexts”**.  
c. Dodaj do workflow następujące wyzwalacze (triggers):  
   i. `push`  
   ii. `workflow_dispatch`

d. Dodaj do workflow jedno zadanie (job). Zadanie o nazwie `echo-data` ma działać na `ubuntu-latest` i zawierać dwa kroki:

   i. Pierwszy krok, nazwany **Display Information**, powinien wypisać poniższe linie z informacjami z kontekstu `github` (wskazówka: użyj wielowierszowego skryptu z kilkoma poleceniami `echo`):
   - i. "Event name: <pobierz tutaj nazwę zdarzenia>"  
   - ii. "Ref: <pobierz tutaj ref>"  
   - iii. "SHA: <pobierz tutaj commit sha>"  
   - iv. "Actor: <pobierz tutaj nazwę aktora>"  
   - v. "Workflow: <pobierz tutaj nazwę workflow>"  
   - vi. "Run ID: <pobierz tutaj ID uruchomienia>"  
   - vii. "Run number: <pobierz tutaj numer uruchomienia>"

   ii. Drugi krok, nazwany **Retrieve Variable**, powinien wypisać jedną linię zawierającą wartość zmiennej repozytorium o nazwie `MY_VAR`.

e. Utwórz zmienną repozytorium o nazwie `MY_VAR`. Ustaw wartość tej zmiennej na `hello world`.  
f. Zacommituj zmiany i wypchnij (push) kod. Poświęć chwilę, aby obejrzeć wynik działania workflow.

---

### 2. Rozszerzenie workflow o nieprawidłowe konteksty

a. Dodaj teraz do workflow nowy klucz konfiguracyjny `run-name`. Definiuje się go na poziomie głównym (top-level), obok kluczy `name` i `on`. `run-name` pozwala zdefiniować nazwę uruchomienia workflow wyświetlaną w interfejsie.  
b. Ustaw wartość `run-name` na **`My custom workflow run name – ${{ runner.os }}`**.  
c. Zacommituj zmiany i wypchnij kod. Przyjrzyj się wynikowi działania workflow. Jaki komunikat błędu się pojawił?

---

### 3. Naprawienie nieprawidłowych kontekstów i rozszerzenie workflow o wejścia (inputs)

a. Zastąp `run-name` wartością **`06 – Contexts | DEBUG – ${{ inputs.debug }}`**.  
b. Dodaj wejście do wyzwalacza `workflow_dispatch`. Wejście powinno mieć nazwę `debug`, typ `boolean` i domyślną wartość `false`.  
c. Zacommituj zmiany i wypchnij kod. Sprawdź wynik uruchomienia workflow wyzwolonego zdarzeniem `push`. Jaka wartość została podstawiona dla wejścia `debug`?  
d. Teraz uruchom workflow z interfejsu i wypróbuj różne warianty wartości wejścia `debug`. Jak wpływa to na rezultat uruchomień workflow?

---

### 4. Rozszerzenie workflow o kontekst `env`

a. Dodaj na poziomie głównym klucz `env`, aby zdefiniować dwie zmienne środowiskowe:  
   i. `MY_WORKFLOW_VAR` z wartością `'workflow'`  
   ii. `MY_OVERWRITTEN_VAR` z wartością `'workflow'`

b. Pod zadaniem `echo-data` dodaj klucz `env`, aby zdefiniować dwie zmienne środowiskowe:  
   i. `MY_JOB_VAR` z wartością `'job'`  
   ii. `MY_OVERWRITTEN_VAR` z wartością `'job'`

c. Dodaj dodatkowy krok po kroku **Retrieve Variable** i nazwij go **Print Env Variables**.  
d. Pod krokiem **Print Env Variables** dodaj `env` z jedną zmienną środowiskową:  
   i. `MY_OVERWRITTEN_VAR` z wartością `'step'`

e. Uruchom wielowierszowy skrypt, który wypisze na ekran:  
   i. "Workflow env: <pobierz tutaj wartość zmiennej środowiskowej MY_WORKFLOW_VAR>"  
   ii. "Overwritten env: <pobierz tutaj wartość zmiennej środowiskowej MY_OVERWRITTEN_VAR>"

f. Dodaj jeszcze jeden krok po pierwszym **Print Env Variables**. Możesz nazwać go podobnie jak poprzedni. Nie definiuj żadnych dodatkowych zmiennych `env`.  
g. Uruchom wielowierszowy skrypt, który wypisze na ekran:  
   i. "Workflow env: <pobierz tutaj wartość zmiennej środowiskowej MY_WORKFLOW_VAR>"  
   ii. "Overwritten env: <pobierz tutaj wartość zmiennej środowiskowej MY_OVERWRITTEN_VAR>"

h. Zacommituj zmiany i wypchnij kod. Obejrzyj wynik działania workflow. W jaki sposób zmienne `env` zostały nadpisane w hierarchii: workflow → job → step?

---

### 5. Porządki w wyzwalaczach

Po sprawdzeniu różnych sposobów wyzwalania workflow zredukuj listę wyzwalaczy tak, aby został tylko `workflow_dispatch`. Zapobiegnie to uruchamianiu workflow przy każdym `push` i zaśmiecaniu listy uruchomień.

---

## 🇬🇧 ENGLISH VERSION

### Exercise Description
In this practical exercise, our goal is to work with different contexts available during workflow runs.  
Here are the instructions for the exercise.

---

### 1. Creating the first version of the workflow

a. Create a file named `06-contexts.yaml` under the `.github/workflows` folder in the root of your repository.  
b. Name the workflow **"06 – Contexts"**.  
c. Add the following triggers to your workflow:  
   i. `push`  
   ii. `workflow_dispatch`

d. Add a single job to the workflow. The job, named `echo-data`, should run on `ubuntu-latest` and contain two steps:

   i. The first step, named **Display Information**, should print the following lines containing information from the `github` context (tip: use a multi-line script with several `echo` commands):
   - i. "Event name: <retrieve the event name here>"  
   - ii. "Ref: <retrieve the ref here>"  
   - iii. "SHA: <retrieve the commit sha here>"  
   - iv. "Actor: <retrieve the actor name here>"  
   - v. "Workflow: <retrieve the workflow name here>"  
   - vi. "Run ID: <retrieve the run ID here>"  
   - vii. "Run number: <retrieve the run number here>"

   ii. The second step, named **Retrieve Variable**, should print a single line containing the value of a repository variable named `MY_VAR`.

e. Create a repository variable named `MY_VAR` and set its value to `hello world`.  
f. Commit the changes and push the code. Take some time to inspect the output of the workflow run.

---

### 2. Extending the workflow with invalid contexts

a. Add a new configuration key named `run-name` to the workflow. This is defined at the top level, as a sibling to the `name` and `on` keys. The run name defines how the workflow run appears in the UI.  
b. Set the value of `run-name` to **`My custom workflow run name – ${{ runner.os }}`**.  
c. Commit the changes and push the code. Inspect the output of the workflow run. Which error message appeared?

---

### 3. Fixing invalid contexts and extending the workflow with inputs

a. Replace the `run-name` with **`06 – Contexts | DEBUG – ${{ inputs.debug }}`**.  
b. Add an input to the `workflow_dispatch` trigger. The input should be named `debug`, have a `boolean` type, and a default value of `false`.  
c. Commit the changes and push the code. Inspect the output of the workflow run triggered by the `push` event. What value was populated for the `debug` input?  
d. Now trigger the workflow from the UI and try different values for the `debug` input. How does this impact the result of the workflow runs?

---

### 4. Extending the workflow with the `env` context

a. Add a top-level `env` key to define two environment variables:  
   i. `MY_WORKFLOW_VAR` set to `'workflow'`  
   ii. `MY_OVERWRITTEN_VAR` set to `'workflow'`

b. Under the `echo-data` job, add an `env` key to define two environment variables:  
   i. `MY_JOB_VAR` set to `'job'`  
   ii. `MY_OVERWRITTEN_VAR` set to `'job'`

c. Add an additional step after **Retrieve Variable**, and name it **Print Env Variables**.  
d. Under **Print Env Variables**, add an `env` key to define a single environment variable:  
   i. `MY_OVERWRITTEN_VAR` set to `'step'`

e. Execute a multi-line script to print the following information on the screen:  
   i. "Workflow env: <retrieve the value of the MY_WORKFLOW_VAR env variable here>"  
   ii. "Overwritten env: <retrieve the value of the MY_OVERWRITTEN_VAR env variable here>"

f. Add yet another step after the first **Print Env Variables**. You can name the step similarly to the previous one. Do not define any additional env variables.  
g. Execute a multi-line script to print the following information on the screen:  
   i. "Workflow env: <retrieve the value of the MY_WORKFLOW_VAR env variable here>"  
   ii. "Overwritten env: <retrieve the value of the MY_OVERWRITTEN_VAR env variable here>"

h. Commit the changes and push the code. Take some time to inspect the output of the workflow run. How were the `env` variables overwritten across the workflow, job, and step hierarchy?

---

### 5. Cleanup of triggers

After exploring the different ways to trigger a workflow, reduce the list of triggers to **only** `workflow_dispatch` to prevent the workflow from running on every push and cluttering the list of workflow runs.
